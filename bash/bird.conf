# Bird2 BGP IPv6 Configuration for Vultr
# Configuration based on Vultr BGP documentation

# Router ID - using your IPv4 address
router id 100.68.73.36;

# Enable debug logging (optional, disable in production)
debug protocols all;

# Configure the BGP protocol
protocol bgp vultr {
    # Local AS number
    local as 216412;
    
    # Vultr's AS number
    neighbor as 64515;
    
    # Vultr BGP neighbor IPv6 address
    neighbor 2001:19f0:ffff::1;
    
    # BGP password authentication
    password "as216412";
    
    # Enable multihop (required for Vultr BGP)
    multihop 2;
    
    # IPv6 unicast configuration
    ipv6 {
        # Import all routes from Vultr
        import all;
        
        # Export our announced prefixes
        export where source = RTS_STATIC;
        
        # Enable next hop self
        next hop self;
    };
    
    # BGP session configuration
    hold time 180;
    keepalive time 60;
    
    # Enable graceful restart
    graceful restart on;
}

# Define the static route for the IPv6 prefix you want to announce
protocol static static_ipv6 {
    ipv6;
    
    # Your IPv6 prefix to announce - replace with your actual prefix
    route 2a01:f100:1f8::/48 blackhole;
}

# Kernel protocol to sync routes with system routing table
protocol kernel kernel_ipv6 {
    ipv6 {
        import all;
        export all;
    };
    
    # Merge identical routes
    merge paths on;
}

# Device protocol to interface with network interfaces
protocol device {
    scan time 10;
}

# Direct protocol for directly connected networks
protocol direct {
    ipv6;
    interface "*";
}

# Optional: Filter to control route announcements
filter announce_filter {
    # Only announce your specific prefix
    if net = 2a01:f100:1f8::/48 then accept;
    reject;
}

# Apply filter to BGP export (uncomment if you want to use filtering)
# protocol bgp vultr {
#     ipv6 {
#         export filter announce_filter;
#     };
# }
